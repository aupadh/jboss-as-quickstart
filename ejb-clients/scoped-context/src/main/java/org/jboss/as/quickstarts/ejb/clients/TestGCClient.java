/*
 * JBoss, Home of Professional Open Source
 * Copyright 2012, Red Hat, Inc. and/or its affiliates, and individual
 * contributors by the @authors tag. See the copyright.txt in the 
 * distribution for a full listing of individual contributors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * http://www.apache.org/licenses/LICENSE-2.0
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,  
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
package org.jboss.as.quickstarts.ejb.clients;

import java.util.Properties;
import java.util.logging.Logger;

import javax.naming.Context;
import javax.naming.InitialContext;
import javax.naming.NamingException;

import org.jboss.as.quickstarts.ejb.multi.server.app.AppTwo;

/**
 * test whether GC will destroy the client context.
 * 
 * @author <a href="mailto:wfink@redhat.com">Wolf-Dieter Fink</a>
 */
public class TestGCClient {
  private static final Logger LOGGER = Logger.getLogger(TestGCClient.class.getName());
  private static final String REMOTE_NAME = "ejb:apptwo/ejb//AppTwoBean!" + AppTwo.class.getName();

  private final AppTwo appTwoProxy;
  
  TestGCClient() throws Exception {
    InitialContext createContextApp2B = createContextApp2B();
    createContextApp2B.close();
    this.appTwoProxy = (AppTwo) createContextApp2B.lookup(REMOTE_NAME);
    LOGGER.info("Context created!");
  }

  private static InitialContext createContextApp2B() throws NamingException {
    Properties p = new Properties();
    p.put("endpoint.name", "client-endpoint-B");
    p.put("org.jboss.ejb.client.scoped.context", true);
    p.put(Context.URL_PKG_PREFIXES, "org.jboss.ejb.client.naming");
    p.put("remote.connectionprovider.create.options.org.xnio.Options.SSL_ENABLED", "false");
    p.put("remote.connections", "appTwo");
    p.put("remote.connection.appTwo.port", String.valueOf(4647));
    p.put("remote.connection.appTwo.host", "localhost");
    p.put("remote.connection.appTwo.connect.options.org.xnio.Options.SASL_DISALLOWED_MECHANISMS", "JBOSS-LOCAL-USER");
    p.put("remote.connection.appTwo.connect.options.org.xnio.Options.SASL_POLICY_NOANONYMOUS", "false");
    p.put("remote.connection.appTwo.username", "quickuser2");
    p.put("remote.connection.appTwo.password", "quick+123");

    return new InitialContext(p);
  }


  private String createGarbage() {
    StringBuilder x = new StringBuilder(10000);
    x.append("ajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlzi");
    x.append("ajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlzi");
    x.append("ajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlzi");
    x.append("ajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlzi");
    x.append("ajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlzi");
    x.append("ajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlzi");
    x.append("ajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlzi");
    x.append("ajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlzi");
    x.append("ajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlzi");
    x.append("ajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlzi");
    x.append("ajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlzi");
    x.append("ajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlziajhdfklahfkladkjahdfklahfklahlfkhaklsdfhaklhfdklahflkahfknvlkjdashfirawenvcikashdfaiowjfnawiuehtaowiehfnlzi");
    return x.toString();
  }

  private void invoke() {
    this.appTwoProxy.invoke("invoked");
  }
  
  /**
   * @param argsj
   * @throws Exception
   */
  public static void main(String[] args) throws Exception {
    TestGCClient test = new TestGCClient();
    
    if (args.length == 0 || !args[0].equalsIgnoreCase("yes")) {
      System.err
          .println("Start with -Xmx1300k to ensure a very small heap! If sure start with argument 'yes' the endless loop!");
    } else {
      while (true) {
        test.invoke();
        test.createGarbage();
      }
    }
  }
}
